{
  "_comment": "Phase 2 config derived from phase1_config.json. Adds emotion families (positive/negative) and routing parameters. Phase 1 fields kept for compatibility.",
  "schema_version": "ccas.p2_emotion_families.v1",
  "methodology": "normalized_quality_scoring_with_dynamics_plus_emotion_families",

  "phase_1_configuration": {
    "_comment": "Legacy Phase 1 block retained for backwards compatibility with older scripts.",
    "tracked_emotions": ["frustration", "satisfaction"],
    "emotion_parameters": {
      "S_max": 3.0,
      "F_max": 2.0,
      "S_cap": 100.0,
      "F_cap": 100.0
    },
    "session_persistence": "reset_at_session_start"
  },

  "phase_2_configuration": {
    "tracked_emotions": ["negative", "positive"],
    "emotion_parameters": {
      "P_max": 3.0,
      "N_max": 2.0,
      "P_cap": 100.0,
      "N_cap": 100.0
    },
    "families": {
      "positive": {
        "buckets": ["rarity_pack", "streak", "economy"],
        "weights": { "rarity_pack": 0.50, "streak": 0.30, "economy": 0.20 }
      },
      "negative": {
        "buckets": ["rarity_pack", "streak", "economy"],
        "weights": { "rarity_pack": 0.50, "streak": 0.30, "economy": 0.20 }
      }
    },
    "routing": {
      "_comment": "Weights are computed per pull. These thresholds decide when a basis bucket participates (non-zero weight).",
      "quality_good_threshold": 0.62,
      "quality_peak_threshold": 0.85,
      "quality_bad_threshold": 0.38,
      "high_cost_threshold_coins": 1500,
      "streak_window": 5,
      "cold_streak_threshold": 0.40,
      "hot_streak_threshold": 0.60,
      "value_score_scale": 1000.0,
      "value_good_threshold": 2.20,
      "value_bad_threshold": 1.80
    },
    "decay": {
      "_comment": "Per-pull decay multipliers for bucket meters (0..1). Lower means faster fade.",
      "positive": { "rarity_pack": 0.985, "streak": 0.92, "economy": 0.96 },
      "negative": { "rarity_pack": 0.985, "streak": 0.92, "economy": 0.96 }
    },
    "recovery": {
      "_comment": "How strongly a very good pull reduces negative (and vice versa).",
      "enabled": true,
      "good_pull_reduces_negative": 0.50,
      "bad_pull_reduces_positive": 0.50
    }
  },

  "emotion_dynamics": {
    "_comment": "Legacy Phase 1 Part 2 tuning retained; Phase 2 can reuse the same quality dynamics for the general delta.",
    "quality_reset": {
      "enabled": true,
      "R_S": 1.5,
      "R_F": 1.5,
      "good_threshold": 0.5,
      "bad_threshold": 0.3,
      "description": "Great pulls reduce frustration; bad pulls get less punishment"
    },
    "neutral_band": {
      "enabled": true,
      "min": 0.38,
      "max": 0.62,
      "recovery": 0.35,
      "description": "Average pulls calm both emotions"
    },
    "oppositional": {
      "enabled": true,
      "k": 0.25,
      "description": "Strong rise in one emotion trims the other (reduced impact in code)"
    },
    "streak": {
      "enabled": true,
      "window": 5,
      "alpha": 1.0,
      "beta": 1.0,
      "threshold": 0.1,
      "description": "Recent history (last N pulls) amplifies current emotions (balanced in code)"
    }
  },

  "duplicate_xp": {
    "common_duplicate_xp": 5,
    "uncommon_duplicate_xp": 10,
    "rare_duplicate_xp": 25,
    "epic_duplicate_xp": 50,
    "legendary_duplicate_xp": 100
  },

  "rarity_values": {
    "common": { "numeric_value": 1, "display_name": "Common" },
    "uncommon": { "numeric_value": 2, "display_name": "Uncommon" },
    "rare": { "numeric_value": 3, "display_name": "Rare" },
    "epic": { "numeric_value": 4, "display_name": "Epic" },
    "legendary": { "numeric_value": 5, "display_name": "Legendary" }
  },

  "pack_types": {
    "bronze_pack": {
      "name": "Bronze Pack",
      "cost": 1000,
      "guaranteed_cards": 3,
      "drop_rates": { "common": 0.75, "uncommon": 0.15, "rare": 0.1 },
      "score_range": { "min_score": 3, "max_score": 7 }
    },
    "silver_pack": {
      "name": "Silver Pack",
      "cost": 1500,
      "guaranteed_cards": 3,
      "drop_rates": {
        "uncommon": 0.65,
        "rare": 0.2,
        "epic": 0.1,
        "legendary": 0.05
      },
      "score_range": { "min_score": 6, "max_score": 12 }
    },
    "gold_pack": {
      "name": "Gold Pack",
      "cost": 2000,
      "guaranteed_cards": 3,
      "drop_rates": {
        "rare": 0.6,
        "epic": 0.3,
        "legendary": 0.1
      },
      "score_range": { "min_score": 9, "max_score": 13 }
    }
  }
}

